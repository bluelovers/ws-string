{"version":3,"file":"stat.js","sourceRoot":"","sources":["stat.ts"],"names":[],"mappings":";;;AAAA,2DAA0D;AAC1D,6BAAqF;AAGrF,SAAgB,eAAe,CAAC,GAAW;IAE1C,OAAO,OAAO,CAAC,GAAG,EAAE,mBAAc,CAAC,CAAC;AACrC,CAAC;AAHD,0CAGC;AAED,SAAgB,wBAAwB,CAAC,GAAW;IAEnD,OAAO,OAAO,CAAC,GAAG,EAAE,yBAAoB,CAAC,CAAC;AAC3C,CAAC;AAHD,4DAGC;AAED;;GAEG;AACH,SAAgB,OAAO,CAAC,GAAW,EAAE,EAAU;IAE9C,IAAI,IAAI,GAAG,EAA4B,CAAC;IAExC,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE;QAErB,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QAE7B,OAAO,EAAE,CAAC;IACX,CAAC,CAAC,CAAC;IAEH,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC;SACzB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE;QACrB,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACjB,OAAO,CAAC,CAAC;IACV,CAAC,EAAE,EAAE,CAAC,CACN;IAED,OAAO,IAAI,CAAC;AACb,CAAC;AAnBD,0BAmBC;AAED,SAAgB,MAAM,CAAC,CAAS;IAE/B,IAAI,EAAU,CAAC;IAEf,QAAQ,CAAC,EACT,CAAC;QACA;YACC,EAAE,GAAG,KAAK,CAAC;YACX,MAAM;QACP;YACC,EAAE,GAAG,KAAK,CAAC;YACX,MAAM;QACP;YACC,EAAE,GAAG,KAAK,CAAC;YACX,MAAM;QACP;YACC,EAAE,GAAG,KAAK,CAAC;YACX,MAAM;QACP;YACC,EAAE,GAAG,IAAA,kCAAa,EAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACxC,MAAM;IACR,CAAC;IAED,IAAI,EAAE,KAAK,CAAC,EACZ,CAAC;QACA,IACA,CAAC;YACA,EAAE,GAAG,IAAI,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,CAAA;QAC/B,CAAC;QACD,OAAO,CAAC,EACR,CAAC;QAED,CAAC;IACF,CAAC;IAED,OAAO,EAAE,CAAA;AACV,CAAC;AApCD,wBAoCC;AAED,kBAAe,wBAAwB,CAAA","sourcesContent":["import { unicodeEscape, toHex } from 'regexp-helper-core';\nimport { reVariationSelectorsAll, reZeroWidthAll, reZeroWidthWithSpace } from './re';\nimport { ENUM_SPACE } from './const';\n\nexport function reportZeroWidth(str: string)\n{\n\treturn _report(str, reZeroWidthAll);\n}\n\nexport function reportZeroWidthWithSpace(str: string)\n{\n\treturn _report(str, reZeroWidthWithSpace);\n}\n\n/**\n * @private\n */\nexport function _report(str: string, re: RegExp)\n{\n\tlet stat = {} as Record<string, number>;\n\n\tstr.replace(re, (s) => {\n\n\t\tstat[s] = (stat[s] |= 0) + 1;\n\n\t\treturn '';\n\t});\n\n\tstat = Object.entries(stat)\n\t\t.reduce((a, [k, n]) => {\n\t\t\ta[_toKey(k)] = n;\n\t\t\treturn a;\n\t\t}, {})\n\t;\n\n\treturn stat;\n}\n\nexport function _toKey(k: string)\n{\n\tlet k2: string;\n\n\tswitch (k)\n\t{\n\t\tcase ENUM_SPACE.TAB:\n\t\t\tk2 = '\\\\t';\n\t\t\tbreak;\n\t\tcase  ENUM_SPACE.VERTICAL_TABULATION:\n\t\t\tk2 = '\\\\v';\n\t\t\tbreak;\n\t\tcase ENUM_SPACE.NEW_LINE:\n\t\t\tk2 = '\\\\n';\n\t\t\tbreak;\n\t\tcase ENUM_SPACE.CARRIAGE_RETURN:\n\t\t\tk2 = '\\\\r';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tk2 = unicodeEscape(k, null, null, true);\n\t\t\tbreak;\n\t}\n\n\tif (k2 === k)\n\t{\n\t\ttry\n\t\t{\n\t\t\tk2 = new RegExp(k, 'u').source\n\t\t}\n\t\tcatch (e)\n\t\t{\n\n\t\t}\n\t}\n\n\treturn k2\n}\n\nexport default reportZeroWidthWithSpace\n"]}